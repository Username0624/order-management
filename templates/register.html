<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>è¨»å†Šå¸³è™Ÿ</title>
    <link rel="stylesheet" href="style.css"> </head>
<body>

<div class="register-container">
    <h2>ğŸ”‘ è¨»å†Šæ–°å¸³è™Ÿ</h2>

    <form id="registerForm" class="register-form">
        <div class="input-group">
            <label for="username">ä½¿ç”¨è€…åç¨±</label>
            <input type="text" id="username" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…åç¨±" required>
        </div>

        <div class="input-group">
            <label for="email">é›»å­éƒµä»¶ (Email)</label>
            <input type="email" id="email" placeholder="user@example.com" required>
        </div>

        <div class="input-group">
            <label for="password">å¯†ç¢¼</label>
            <input type="password" id="password" placeholder="è‡³å°‘8å€‹å­—å…ƒ" required>
        </div>
        
        <button type="submit" class="submit-btn">è¨»å†Š</button>
    </form>
    
    <p id="msg" class="message-area"></p>

    <p class="login-link">
        å·²ç¶“æœ‰å¸³è™Ÿï¼Ÿ <a href="#" id="toLogin">è¿”å›ç™»å…¥</a>
    </p>
</div>

<script src="/static/api.js"></script>
<script>
    // è¨»å†Šäº‹ä»¶
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const msgElement = document.getElementById("msg");
        msgElement.className = 'message-area'; // é‡ç½®é¡åˆ¥

        const result = await apiRegister(
            username.value,
            email.value,
            password.value
        );

        msgElement.innerText = result.message || result.error;
        
        if (result.success) {
            msgElement.classList.add('success');
            // è¨»å†ŠæˆåŠŸï¼Œ1ç§’å¾Œè·³å›ç™»å…¥é 
            setTimeout(() => location.href = "login", 1000);
        } else {
            msgElement.classList.add('error');
        }
    });

    // è¿”å›ç™»å…¥æŒ‰éˆ•äº‹ä»¶
    document.getElementById("toLogin").addEventListener("click", (e) => {
        e.preventDefault(); // é˜²æ­¢ a æ¨™ç±¤è·³è½‰ï¼Œç”± JS æ§åˆ¶
        location.href = "login";
    });
    
    console.log("register page loaded");
</script>

</body>
</html>